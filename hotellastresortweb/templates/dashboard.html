{% extends "base.html" %}

{% block content %}

<nav class="query-nav">
    <a href="#q1">1. Revenue by Service Type</a>
    <a href="#q2">2. Avg Stay by Room Type</a>
    <a href="#q3">3. Event Space Utilization</a>
    <a href="#q4">4. Top Guests by Spend</a>
    <a href="#q5">5. Avg Revenue per Guest</a>
    <a href="#q6">6. Avg Stay by Building</a>
    <a href="#q7">7. Top Event Hosts</a>
    <a href="#q8">8. Reservations per Month</a>
</nav>

<section id="q1">
    <h2>1. Revenue Breakdown by Service Type</h2>
    <p class="description">
        Shows how much revenue each service (room nights, rentals, wellness, food, etc.)
        generates so management can spot the most and least profitable offerings and
        decide where to focus pricing and promotions.
    </p>
    <table>
        <thead>
            <tr>
                <th>Service</th>
                <th>Total Revenue</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q1_results %}
            <tr>
                <td>{{ row.serviceName }}</td>
                <td>{{ "%.2f"|format(row.totalRevenue or 0) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<section id="q2">
    <h2>2. Average Stay Duration by Room Type</h2>
    <p class="description">
        Compares how long guests typically stay in each room type. Longer stays can
        signal popular room categories or good value, which can guide pricing and
        package design.
    </p>
    <table>
        <thead>
            <tr>
                <th>Room Type</th>
                <th>Average Stay (days)</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q2_results %}
            <tr>
                <td>{{ row.typeName }}</td>
                <td>{{ row.avgStayDays }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<section id="q3">
    <h2>3. Utilization Rate for Event Spaces</h2>
    <p class="description">
        Compares actual event usage hours to scheduled hours for each event room.
        High utilization highlights busy spaces; low utilization can flag rooms that
        may need different pricing or scheduling.
    </p>
    <table>
        <thead>
            <tr>
                <th>Room</th>
                <th>Utilization Rate (%)</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q3_results %}
            <tr>
                <td>{{ row.roomNumber }}</td>
                <td>{{ "%.2f"|format(row.utilizationRate or 0) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<section id="q4">
    <h2>4. Top Guests by Total Spend</h2>
    <p class="description">
        Lists the guests who spend the most across all services. These are prime
        candidates for loyalty perks, targeted offers, and white-glove service.
    </p>
    <table>
        <thead>
            <tr>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Total Spend</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q4_results %}
            <tr>
                <td>{{ row.firstName }}</td>
                <td>{{ row.lastName }}</td>
                <td>{{ "%.2f"|format(row.totalSpend or 0) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<section id="q5">
    <h2>5. Average Revenue per Guest (per charge)</h2>
    <p class="description">
        For each guest, shows average revenue per charge. This helps compare how
        profitable different guests are and track changes in guest value over time.
    </p>
    <table>
        <thead>
            <tr>
                <th>Guest ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>Avg Revenue per Charge</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q5_results %}
            <tr>
                <td>{{ row.guestID }}</td>
                <td>{{ row.firstName }}</td>
                <td>{{ row.lastName }}</td>
                <td>{{ "%.2f"|format(row.avgRevenuePerCharge or 0) }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<section id="q6">
    <h2>6. Average Occupancy Duration by Building</h2>
    <p class="description">
        Compares average length of stay across buildings, showing which properties
        keep guests longer and where upgrades, staffing, or pricing changes might be
        most effective.
    </p>
    <table>
        <thead>
            <tr>
                <th>Building</th>
                <th>Average Stay (days)</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q6_results %}
            <tr>
                <td>{{ row.buildingName }}</td>
                <td>{{ row.avgStayDays }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<section id="q7">
    <h2>7. Top Event Hosts by Number of Events</h2>
    <p class="description">
        Shows which hosts bring the most events to LRH. These repeat clients are
        strong partnership targets for special contracts or preferred rates.
    </p>
    <table>
        <thead>
            <tr>
                <th>Host ID</th>
                <th>Total Events</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q7_results %}
            <tr>
                <td>{{ row.hostID }}</td>
                <td>{{ row.totalEvents }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

<section id="q8">
    <h2>8. Total Reservations per Month</h2>
    <p class="description">
        Counts how many reservations start each month, giving management a clear view
        of seasonality and demand patterns for staffing, budgeting, and marketing.
    </p>
    <table>
        <thead>
            <tr>
                <th>Month</th>
                <th>Total Reservations</th>
            </tr>
        </thead>
        <tbody>
            {% for row in q8_results %}
            <tr>
                <td>{{ row.month }}</td>
                <td>{{ row.totalReservations }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</section>

{% endblock %}

